---
title: "Backend Proxy: Clone, Run, Connect"
description: Set up the AUTOUI proxy server to securely handle LLM API keys and manage client authentication.
keywords: ["proxy", "backend", "openrouter", "security", "api key", "client key"]
---

<Note title="Quick Start Option" type="success">
**Want to get started quickly?** You can use AutoUI's deployed service at [autoui-chi.vercel.app](https://autoui-chi.vercel.app/) to generate an `appId` and `shared_secret` without setting up your own backend. This guide is for developers who want to run their own proxy server.
</Note>

The AUTOUI proxy server is a **backend component** that keeps your OpenRouter API key secure on the server while allowing your frontend to communicate with LLM providers. You can either use AutoUI's deployed service or run your own proxy server.

## Why Use a Proxy?

<Note title="Security First" type="danger">
Never expose your OpenRouter API key in frontend code. It can be extracted from browser bundles, network requests, or source code. Always use a proxy server.
</Note>

The proxy server provides:

- **API Key Security**: Your OpenRouter API key stays on the server, never exposed to browsers
- **Unified Authentication**: Single client key (shared secret) for all frontend instances
- **Rate Limiting**: Centralized control over request rates
- **CORS Management**: Proper CORS headers for cross-origin requests
- **Request Logging**: Server-side logging for debugging and monitoring

## Architecture

```
Frontend (Browser)
  │
  │ Sends: config + user message + sharedSecret
  ▼
Proxy Server (Your Backend)
  │
  │ Adds: OPENROUTER_API_KEY
  ▼
OpenRouter API
  │
  │ Returns: Plan JSON
  ▼
Proxy Server
  │
  │ Forwards: Plan JSON
  ▼
Frontend Runtime
```

## Setup Steps

<Step>
<StepItem title="1. Clone the Proxy Server Repository">
Clone the AUTOUI proxy server repository:

```bash
git clone https://github.com/<org>/<autoui-proxy>.git
cd autoui-proxy
```

<Note title="Repository URL" type="warning">
The proxy server repository URL should be documented in the AUTOUI project. If you don't have it, check the main AUTOUI repository or contact support. For now, use: `https://github.com/<org>/<autoui-proxy>`
</Note>
</StepItem>

<StepItem title="2. Install Dependencies">
Install the required dependencies:

```bash
npm install
# or
pnpm install
# or
yarn install
```
</StepItem>

<StepItem title="3. Set Environment Variables">
Create a `.env` file in the proxy server root:

```bash
OPENROUTER_API_KEY=sk-or-v1-...
PORT=3001
NODE_ENV=development
```

**Required variables:**
- `OPENROUTER_API_KEY`: Your OpenRouter API key (get it from [openrouter.ai](https://openrouter.ai))
- `PORT`: Port for the proxy server (default: 3001)
- `NODE_ENV`: Environment mode (`development` or `production`)

**Optional variables (for production):**
- `CORS_ORIGIN`: Allowed origin for CORS (e.g., `https://yourdomain.com`)
- `RATE_LIMIT_MAX`: Maximum requests per minute per client
- `LOG_LEVEL`: Logging level (`debug`, `info`, `warn`, `error`)
</StepItem>

<StepItem title="4. Run the Server Locally">
Start the development server:

```bash
npm run dev
# or
pnpm dev
# or
yarn dev
```

The server should start on `http://localhost:3001` (or your configured port).

You should see output like:
```
Proxy server running on http://localhost:3001
OpenRouter API key configured
Ready to accept requests
```
</StepItem>

<StepItem title="5. Generate Client Key">
Open the proxy server UI in your browser:

```
http://localhost:3001
```

You'll see a page where you can:
1. Enter your OpenRouter API key (if not set via env var)
2. Click "Generate Client Key"
3. Copy the generated client key (shared secret)

<Note title="Client Key Format" type="success">
The client key is a secure random string that acts as a shared secret between your frontend and proxy. It's different from your OpenRouter API key and can be safely included in frontend code.
</Note>
</StepItem>

<StepItem title="6. Connect Frontend Config">
Paste the generated client key into your frontend `AutoUIConfig`:

```tsx
const config: AutoUIConfig = {
  // ... other config
  llm: {
    proxyUrl: 'http://localhost:3001',  // Your proxy server URL
    sharedSecret: 'your-generated-client-key-here', // Paste the key here
    appDescriptionPrompt: 'Your app description...',
    temperature: 0.2,
    maxTokens: 2048,
  },
}
```

<Note title="Development vs Production" type="warning">
For production, update `proxyUrl` to your deployed proxy server URL (e.g., `https://api.yourdomain.com`).
</Note>
</StepItem>
</Step>

## Production Checklist

Before deploying to production, ensure:

<Step>
<StepItem title="HTTPS">
- Proxy server must be served over HTTPS
- Frontend must use HTTPS when connecting to proxy
- Update `proxyUrl` in config to use `https://`
</StepItem>

<StepItem title="CORS Configuration">
Configure CORS to only allow your frontend domain:

```bash
CORS_ORIGIN=https://yourdomain.com
```

Or configure in your proxy server code to allow specific origins.
</StepItem>

<StepItem title="Secrets Management">
- Store `OPENROUTER_API_KEY` in environment variables (never commit to git)
- Use a secrets manager (AWS Secrets Manager, Vercel Env, etc.) in production
- Rotate API keys periodically
- Use different keys for development and production
</StepItem>

<StepItem title="Rate Limiting">
Enable rate limiting to prevent abuse:

```bash
RATE_LIMIT_MAX=100  # requests per minute per client
```

Adjust based on your usage patterns and OpenRouter limits.
</StepItem>

<StepItem title="Logging & Monitoring">
- Set up logging for proxy requests (success/failure)
- Monitor API usage and costs
- Set up alerts for errors or rate limit violations
- Log client keys for debugging (but never expose them)
</StepItem>

<StepItem title="Error Handling">
- Return appropriate error messages to frontend
- Don't expose internal errors or API keys in responses
- Handle OpenRouter API errors gracefully
- Implement retry logic for transient failures
</StepItem>
</Step>

## Security Best Practices

<Note title="API Key Security" type="danger">
- Never commit `OPENROUTER_API_KEY` to version control
- Never expose API keys in frontend code or network requests
- Use environment variables or secrets managers
- Rotate keys if they're ever exposed
</Note>

<Note title="Client Key Security" type="warning">
- Client keys (shared secrets) can be included in frontend code, but:
  - Use different keys for different environments
  - Rotate keys periodically
  - Monitor for unauthorized usage
  - Consider IP whitelisting for production
</Note>

## Troubleshooting

### Proxy Server Won't Start

- Check that `PORT` is not already in use
- Verify `OPENROUTER_API_KEY` is set correctly
- Check server logs for error messages
- Ensure all dependencies are installed

### Frontend Can't Connect to Proxy

- Verify `proxyUrl` matches the server URL
- Check CORS configuration allows your frontend origin
- Ensure proxy server is running
- Check browser console for CORS errors

### Client Key Not Working

- Verify the key was copied correctly (no extra spaces)
- Ensure the key was generated with the same OpenRouter API key
- Check proxy server logs for authentication errors
- Regenerate the key if needed

### OpenRouter API Errors

- Verify your OpenRouter API key is valid
- Check your OpenRouter account balance/limits
- Review OpenRouter API documentation for error codes
- Check proxy server logs for detailed error messages

## Next Steps

- Configure your frontend: See [Installation & Configuration](/docs/installation)
- Add functions: See [Functions](/docs/functions)
- Customize styling: See [ModalChat Styling](/docs/styling)

